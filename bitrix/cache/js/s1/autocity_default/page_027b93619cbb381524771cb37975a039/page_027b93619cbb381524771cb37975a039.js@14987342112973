
; /* Start:"a:4:{s:4:"full";s:99:"/bitrix/templates/autocity_default/components/bitrix/news.list/garages/script.min.js?14984659002578";s:6:"source";s:80:"/bitrix/templates/autocity_default/components/bitrix/news.list/garages/script.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
function RSMonopolyDrawPlacemark(t,s){t.each(function(){$(this).hasClass("cityempty")||$(this).hasClass("typeempty")?s[$(this).data("id")].options.set("visible",!1):s[$(this).data("id")].options.set("visible",!0)})}$(document).ready(function(){var t,s=$(".shops_list").find(".item"),e=[0,0],a={};s.each(function(){var t=$(this).data("coords").split(",");e[0]=e[0]+parseFloat(t[0]),e[1]=e[1]+parseFloat(t[1])}),e[0]=e[0]/s.length,e[1]=e[1]/s.length;var t,a={};ymaps.ready(function(){t=new ymaps.Map("rsYMapShops",{center:e,zoom:16,type:"yandex#publicMap",behaviors:["default","scrollZoom"]}),s.each(function(){var s=$(this).data("coords").split(","),e=$(this).data("id");s[0]=parseFloat(s[0]),s[1]=parseFloat(s[1]),a[e]=new ymaps.Placemark(s,{balloonContentHeader:$(this).find("name").html(),balloonContentBody:$(this).find(".descr").html()}),t.geoObjects.add(a[e])}),t.setBounds(t.geoObjects.getBounds(),{checkZoomRange:!0}).controls.add("mapTools").add("zoomControl").add("typeSelector")}),s.on("mouseenter",function(){a[$(this).data("id")].options.set("preset","twirl#redDotIcon")}).on("mouseleave",function(){a[$(this).data("id")].options.set("preset","twirl#blueIcon")}),$(document).on("keyup",".search_city input",function(){var t=$(this),s=t.parents(".search_city").find(".cities_list"),e=t.val(),a=0;e.length<1?s.css("display","none"):(s.css("display","block"),a=0,s.find("a").each(function(){var t=$(this).html().substr(0,e.length);e.toLowerCase()==t.toLowerCase()?($(this).parent().css("display","block"),a++):$(this).parent().css("display","none")}),a<1&&s.css("display","none"))}),$(document).on("blur",".search_city input",function(){var t=$(this).val();t.length<1?$(".shops_list").find("li").removeClass("cityempty"):$(".search_city input").trigger("keyup"),RSMonopolyDrawPlacemark(s,a)}),$(document).on("click",".cities_list a",function(){var t=$(this).data("filter");return $(".search_city input").val($(this).html()),$(".cities_list").css("display","none"),$(".shops_list").find("li").addClass("cityempty"),$(".shops_list").find('li[data-city="'+t+'"]').removeClass("cityempty"),RSMonopolyDrawPlacemark(s,a),!1}),$(document).on("click",".shops .filter .btn",function(){$(".shops .filter").find(".btn").removeClass("btn-primary").addClass("btn-default"),$(this).addClass("btn-primary").removeClass("btn-default");var t=$(this).data("filter");t.length>0?($(".shops_list").find("li").addClass("typeempty"),$(".shops_list").find('li[data-type="'+t+'"]').removeClass("typeempty")):$(".shops_list").find("li").removeClass("typeempty"),RSMonopolyDrawPlacemark(s,a)})});
/* End */
;; /* /bitrix/templates/autocity_default/components/bitrix/news.list/garages/script.min.js?14984659002578*/
